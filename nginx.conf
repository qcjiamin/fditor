server {
    listen 80;
    server_name localhost;
    root /usr/share/nginx/html;
    index index.html;

    # 单页应用 (如 Vue3 的路由) 通常通过前端 JavaScript 管理路由，URL 变化时不会向服务器请求新页面
    # try_files $uri $uri/ /index.html的含义是：
    # 首先尝试访问请求的文件 ($uri)
    # 如果文件不存在，尝试访问对应的目录 ($uri/)
    # 如果都不存在，就返回index.html让前端路由处理
    # 没有这个配置，直接访问类似/about这样的路由会出现 404 错误。

    # 支持SPA路由
    location / {
        try_files $uri $uri/ /index.html;
    }

    # 这部分优化了静态资源的缓存策略：
    # ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$：匹配所有指定后缀的静态文件
    # expires 1d：告诉浏览器这些文件 1 天内有效，无需重新请求
    # Cache-Control "public, max-age=86400"：更详细的缓存控制，86400 秒 = 1 天
    # 这个配置的好处：
    # 减少重复请求，提高页面加载速度
    # 减轻服务器压力
    # 改善用户体验

    # 静态资源缓存
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1d;
        add_header Cache-Control "public, max-age=86400";
    }
}